<h1 id="gateway-configuration">Gateway Configuration</h1>
<p>Here you can find a complete Ruuvi Gateway configuration guide for advanced users.</p>
<h2 id="configuration-access">Configuration Access</h2>
<p>You can access the configuration options via either the Wi-Fi hotspot or LAN.</p>
<h3 id="wi-fi-hotspot-access">Wi-Fi Hotspot Access</h3>
<p>When unconfigured, Ruuvi Gateway starts a Wi-Fi hotspot automatically, <strong>Configure Ruuvi Gateway XXXX</strong>. Here, ‘XXXX’ represents the last 4 characters of the Gateway’s Bluetooth MAC address.</p>
<p>Steps to configure via hotspot:</p>
<ol type="1">
<li>Connect to the Wi-Fi hotspot - Utilize your device like a smartphone, tablet, or computer.</li>
<li>A captive portal will automatically open in the browser.</li>
<li>If this doesn’t happen, manually reach the portal by navigating to http://10.10.0.1.</li>
</ol>
<p>In case if the Gateway was already configured and you want to activate Wi-Fi hotspot, you can do it by a short press on the <strong>CONFIGURE</strong> button located on the bottom of the Gateway under USB port.</p>
<p>If you want to completely erase the Gateway configuration and start the Wi-Fi hotspot, you can do a long press on the <strong>CONFIGURE</strong> button (more than 10 seconds).</p>
<p>After configuration is complete, you will see the assigned Gateway IP address on the final page.</p>
<h3 id="lan-access">LAN access</h3>
<p>A configured and locally connected Ruuvi Gateway offers configuration access.</p>
<p>Steps to configure via LAN:</p>
<ol type="1">
<li>In the browser, enter the Gateway IP address prefixed by ‘http://’. For instance, if the Gateway IP address is 192.168.2.101, enter http://192.168.2.101.</li>
<li>Alternatively, use the Gateway hostname. The hostname format is <code>ruuvigatewayXXXX.local</code>, where ‘XXXX’ is the last 4 characters of the Bluetooth MAC address of the Gateway in lowercase. Retrieve ‘XXXX’ by activating the Wi-Fi hotspot and checking its name <strong>Configure Ruuvi Gateway XXXX</strong>.</li>
</ol>
<h2 id="current-firmware-version-information">Current firmware version information</h2>
<p>Firmware version information can be found at the bottom of each page:</p>
<figure>
<img src="images/start_page.png" alt="" /><figcaption>start_page</figcaption>
</figure>
<p>There are two version numbers: * Ruuvi Gateway firmware version (v1.15.0). <a href="https://github.com/ruuvi/ruuvi.gateway_esp.c">GitHub repo</a> * Ruuvi Gateway nRF52 co-processor firmware version (v1.0.0) <a href="https://github.com/ruuvi/ruuvi.gateway_nrf.c">GitHub repo</a></p>
<h2 id="connect-ruuvi-gateway-to-the-internet">Connect Ruuvi Gateway to the Internet</h2>
<h3 id="ethernet-advanced-options">Ethernet – Advanced options</h3>
<p>If you want to configure your Ruuvi Gateway to use a static IP address please uncheck <strong>Use DHCP</strong> after selecting the Ethernet connection option.<br />
The following fields are required for this configuration:</p>
<ul>
<li><strong>Static IP</strong></li>
<li><strong>Netmask</strong></li>
<li><strong>Gateway</strong></li>
<li><strong>DNS IP 1</strong></li>
<li><strong>DNS IP 2</strong> (optional)</li>
</ul>
<figure>
<img src="images/ethernet_advanced_options.png" alt="" /><figcaption>ethernet_advanced_options</figcaption>
</figure>
<h3 id="wi-fi-advanced-options">Wi-Fi – Advanced Options</h3>
<p>A hidden Wi-Fi network can be used for connecting your Ruuvi Gateway to internet. This setting is shown in the Wi-Fi Network configuration page under Advanced.</p>
<p>Select <strong>Connect Manually</strong> to see the following required fields:</p>
<ul>
<li><strong>SSID</strong></li>
<li><strong>Password</strong></li>
</ul>
<figure>
<img src="images/wifi_advanced_options.png" alt="" /><figcaption>wifi_advanced_options</figcaption>
</figure>
<h2 id="firmware-update">Firmware update</h2>
<p>It is always recommended to keep your Ruuvi Gateway up-to-date.</p>
<p>Your firmware version and update availability will be checked on the <strong>Software Update</strong> page during the configuration process. If an update is available, you will be offered to install it from the default location (recommended).</p>
<p>Alternatively you can configure your own update server, which should return a JSON file containing the version number and URL from where the firmware binaries can be downloaded, see example:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="fu">{</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a>  <span class="dt">&quot;latest&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a>    <span class="dt">&quot;version&quot;</span><span class="fu">:</span><span class="st">&quot;v1.15.0&quot;</span><span class="fu">,</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a>    <span class="dt">&quot;url&quot;</span><span class="fu">:</span><span class="st">&quot;https://fwupdate.ruuvi.com/v1.15.0&quot;</span><span class="fu">,</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a>    <span class="dt">&quot;created_at&quot;</span><span class="fu">:</span><span class="st">&quot;2023-12-12T12:00:00Z&quot;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a>  <span class="fu">}</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a><span class="fu">}</span></span></code></pre></div>
<p>This option is available under <strong>Advanced</strong>:</p>
<figure>
<img src="images/software_update_advanced_options1.png" alt="" /><figcaption>software_update_advanced_options1</figcaption>
</figure>
<p>Or, you can choose your own location for the firmware binaries by checking <strong>Don’t use the software update provided by Ruuvi but download binary files from URL address instead</strong> under <strong>Advanced</strong>:</p>
<figure>
<img src="images/software_update_advanced_options2.png" alt="" /><figcaption>software_update_advanced_options</figcaption>
</figure>
<p>If you want to use a previous release version, you can provide a link to GitHub <code>https://github.com/ruuvi/ruuvi.gateway_esp.c/releases/download/&lt;VERSION_TAG&gt;</code> or to the Ruuvi update server <code>https://fwupdate.ruuvi.com/&lt;VERSION_TAG&gt;</code> where you need to replace <strong><VERSION_TAG></strong> with the version number you need, for example “v1.15.0”.</p>
<p>For example: <code>https://github.com/ruuvi/ruuvi.gateway_esp.c/releases/download/v1.13.0</code></p>
<p>Here you will find a list of the releases available for download: https://github.com/ruuvi/ruuvi.gateway_esp.c/releases</p>
<p>If you want to use a developer build, you can provide a link to the Jenkins build server <code>https://jenkins.ruuvi.com/job/ruuvi_gateway_esp-PR/&lt;BUILD&gt;/artifact/build/</code> where you need to replace <strong><BUILD></strong> with the build number you need.</p>
<p>For example: <code>https://jenkins.ruuvi.com/job/ruuvi_gateway_esp-PR/805/artifact/build/</code></p>
<p>To start the firmware update process press the <em>Update</em> button.<br />
The firmware update process takes a few minutes,and you will see the progress on the screen. It’s important to make sure that your Ruuvi Gateway remains powered during this time.</p>
<figure>
<img src="images/software_update_progress.png" alt="" /><figcaption>software_update_progress</figcaption>
</figure>
<p>You can also skip this step by pressing <em>Continue without update</em>.</p>
<figure>
<img src="images/software_update.png" alt="" /><figcaption>software_update</figcaption>
</figure>
<h2 id="automatic-updates">Automatic updates</h2>
<p>Your Ruuvi Gateway has the ability to automatically check for and install new firmware updates using a scheduler. We recommend that you select <strong>Auto Update</strong>, which accepts new versions for installation 2 weeks after the release date.</p>
<p>Advanced users can also select a special <strong>Auto Update for beta-testers</strong> mode that accepts new firmware versions and automatically installs them as they become available.</p>
<p>Selecting <strong>Manual updates only</strong> disables automatic firmware updates for your gateway.</p>
<figure>
<img src="images/automatic_updates_select_mode.png" alt="" /><figcaption>automatic_updates_select_mode</figcaption>
</figure>
<p>The automatic update scheduler allows you to specify when you want automatic updates to be fetched and installed. You can schedule updates to be checked by:</p>
<ul>
<li><strong>Weekdays</strong></li>
<li><strong>Timeslot</strong></li>
<li><strong>Time zone</strong></li>
</ul>
<figure>
<img src="images/automatic_updates_advanced_options.png" alt="" /><figcaption>automatic_updates_advanced_options</figcaption>
</figure>
<h2 id="automatic-configuration-download">Automatic Configuration Download</h2>
<p>You can configure the gateway to download its configuration from a remote server (checking for an updated configuration will be performed with a set period).</p>
<p>You just need to specify the base URL from where the configuration file with the Gateway settings can be downloaded.</p>
<p>If you specify a folder name as the base URL (any URL that does not end with ‘.json’), it will first attempt to read the configuration file for the Gateway from <GW_MAC>.json (e.g. AABBCCDDEEFF.json). If this file fails, it will attempt to read the overall configuration from gw_cfg.json.</p>
<p>The configuration file can also be generated dynamically by the server, which requires the server to analyse the HTTP header ‘ruuvi_gw_mac’, which contains the MAC address in the format XX:XX:XX:XX:XX: XX.</p>
<p>After entering the base URL, press the Check button to validate the URL and check that the configuration file exists. Next, after pressing the Download button, the new configuration will be downloaded, which completes the configuration process. After that, Ruuvi Gateway will periodically check for configuration updates and download them. The polling period is set in the configuration file, which is downloaded from the server.</p>
<figure>
<img src="images/automatic_configuration_download_advanced_options.png" alt="" /><figcaption>automatic_configuration_download_advanced_options</figcaption>
</figure>
<p>The gateway configuration file on the remote server must contain at least the following attributes: * <strong>remote_cfg_use</strong>: true * <strong>remote_cfg_url</strong>: URL * <strong>remote_cfg_refresh_interval_minutes</strong>: a period of checking for an updated configuration (in minutes) * <strong>remote_cfg_auth_type</strong>: authentication type (‘<strong>no</strong>’ if authentication is not required)</p>
<p>Example of minimal gw_cfg.json:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="fu">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_use&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_url&quot;</span><span class="fu">:</span> <span class="st">&quot;http://192.168.1.101:7000/&quot;</span><span class="fu">,</span> </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_refresh_interval_minutes&quot;</span><span class="fu">:</span> <span class="dv">10</span><span class="fu">,</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_auth_type&quot;</span><span class="fu">:</span> <span class="st">&quot;no&quot;</span> </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a><span class="fu">}</span></span></code></pre></div>
<p>All configuration attributes not specified in the configuration file will retain their previous value after the new configuration is loaded from the remote server.</p>
<p>Configuration downloads with basic HTTP authentication are also supported:</p>
<figure>
<img src="images/automatic_configuration_download_auth_basic.png" alt="" /><figcaption>automatic_configuration_download_auth_basic</figcaption>
</figure>
<p>Example of corresponding minimal gw_cfg.json:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="fu">{</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_use&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_url&quot;</span><span class="fu">:</span> <span class="st">&quot;http://192.168.1.101:7000/&quot;</span><span class="fu">,</span> </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_refresh_interval_minutes&quot;</span><span class="fu">:</span> <span class="dv">10</span><span class="fu">,</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_auth_type&quot;</span><span class="fu">:</span> <span class="st">&quot;basic&quot;</span><span class="fu">,</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_auth_basic_user&quot;</span><span class="fu">:</span> <span class="st">&quot;user1&quot;</span><span class="fu">,</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_auth_basic_pass&quot;</span><span class="fu">:</span> <span class="st">&quot;password1&quot;</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true"></a><span class="fu">}</span></span></code></pre></div>
<p>Or bearer authentication (using a token):</p>
<figure>
<img src="images/automatic_configuration_download_auth_bearer.png" alt="" /><figcaption>automatic_configuration_download_auth_bearer</figcaption>
</figure>
<p>Example of corresponding minimal gw_cfg.json:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="fu">{</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_use&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_url&quot;</span><span class="fu">:</span> <span class="st">&quot;http://192.168.1.101:7000/&quot;</span><span class="fu">,</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_refresh_interval_minutes&quot;</span><span class="fu">:</span> <span class="dv">10</span><span class="fu">,</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_auth_type&quot;</span><span class="fu">:</span> <span class="st">&quot;bearer&quot;</span><span class="fu">,</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_auth_bearer_token&quot;</span><span class="fu">:</span> <span class="st">&quot;my_secret_token_123&quot;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true"></a><span class="fu">}</span></span></code></pre></div>
<p>It also supports client authentication via SSL by enabling the upload of a client certificate and its associated private key, ensuring secure and verified client-server communication:</p>
<figure>
<img src="images/automatic_configuration_download_client_ssl_cert.png" alt="" /><figcaption>automatic_configuration_download_client_ssl_cert</figcaption>
</figure>
<p>Example of corresponding minimal gw_cfg.json:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="fu">{</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_use&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_url&quot;</span><span class="fu">:</span> <span class="st">&quot;http://192.168.1.101:7000/&quot;</span><span class="fu">,</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_refresh_interval_minutes&quot;</span><span class="fu">:</span> <span class="dv">10</span><span class="fu">,</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_auth_type&quot;</span><span class="fu">:</span> <span class="st">&quot;none&quot;</span><span class="fu">,</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_use_ssl_client_cert&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true"></a><span class="fu">}</span></span></code></pre></div>
<p>You can use a server SSL Certificate if you want to be independent of public Certificate Authorities (CAs) or if you have deployed a self-signed certificate on the HTTPS server, giving you greater control and customization over your security infrastructure:</p>
<figure>
<img src="images/automatic_configuration_download_server_ssl_cert.png" alt="" /><figcaption>automatic_configuration_download_server_ssl_cert</figcaption>
</figure>
<p>Example of corresponding minimal gw_cfg.json:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="fu">{</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_use&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_url&quot;</span><span class="fu">:</span> <span class="st">&quot;http://192.168.1.101:7000/&quot;</span><span class="fu">,</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_refresh_interval_minutes&quot;</span><span class="fu">:</span> <span class="dv">10</span><span class="fu">,</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_auth_type&quot;</span><span class="fu">:</span> <span class="st">&quot;none&quot;</span><span class="fu">,</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true"></a>  <span class="dt">&quot;remote_cfg_use_ssl_server_cert&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true"></a><span class="fu">}</span></span></code></pre></div>
<h2 id="lan-access-settings">LAN Access Settings</h2>
<p>You can restrict or allow access to your Ruuvi Gateway from the local network.</p>
<p>By default, the access is <strong>Password protected</strong> using the default password (unique device ID which is printed on the bottom of the Ruuvi Gateway):</p>
<figure>
<img src="images/access_settings_default.png" alt="" /><figcaption>access_settings_default</figcaption>
</figure>
<p>If you want to configure a custom <strong>Username</strong> and <strong>password</strong>, select <strong>Protected with a custom password</strong> (under <strong>Advanced settings</strong>):</p>
<figure>
<img src="images/access_settings_custom_password.png" alt="" /><figcaption>access_settings_custom_password</figcaption>
</figure>
<p>You can also prohibit access by password by selecting <strong>No remote configurable</strong> or allow access without a password by selecting <strong>Remote configurable without a password</strong>.</p>
<p>It is also possible to configure access to the Ruuvi Gateway from LAN using bearer authentication (under <strong>Advanced settings</strong>):</p>
<figure>
<img src="images/access_settings_advanced_options.png" alt="" /><figcaption>access_settings_advanced_options</figcaption>
</figure>
<p>If you set a token for read-only access, you can read data from the “/history” and “/metrics” endpoints, or read the gateway configuration. To be able to configure the gateway programmatically, a full (read/write) access token must be enabled.</p>
<p>Examples: * Request “/history” using read-only bearer token: <code>shell     curl -v http://&lt;RUUVI_GW_IP&gt;/history        -H "Authorization: Bearer Uj+4tj24unVekco/lTLTRyxUfv1J8M6U+sbNsKTWRr0="</code> * Request “/metrics” using read-only bearer token: <code>shell     curl -v http://&lt;RUUVI_GW_IP&gt;/metrics        -H "Authorization: Bearer Uj+4tj24unVekco/lTLTRyxUfv1J8M6U+sbNsKTWRr0="</code> * Download the gateway configuration using the read-only access bearer token and save it to file ‘ruuvi.json’: <code>shell     curl -v http://&lt;RUUVI_GW_IP&gt;/ruuvi.json        -H "Authorization: Bearer Uj+4tj24unVekco/lTLTRyxUfv1J8M6U+sbNsKTWRr0="        --output ruuvi.json</code> * Upload the gateway configuration using the read-write access bearer token from the file ‘./ruuvi.json’ (note that the network part of the configuration will be ignored): <code>shell     curl -v http://&lt;RUUVI_GW_IP&gt;/ruuvi.json        -H "Authorization: Bearer 1SDrQH1FkH+pON0GsSjt2gYeMSP02uYqfuu7LWdaBvY="        -d @./ruuvi.json</code> * Starting firmware update from URL: <code>shell     curl -v http://&lt;RUUVI_GW_IP&gt;/fw_update.json        -H "Authorization: Bearer 1SDrQH1FkH+pON0GsSjt2gYeMSP02uYqfuu7LWdaBvY="        -H 'Content-Type: application/json'        -d '{"url":"https://my_server.com:7000/gw_firmware/"}'</code> * A forced download of gateway configuration from the remote server (you must pre-configure the gateway and set the remote server URL): <code>shell     curl -v http://&lt;RUUVI_GW_IP&gt;/gw_cfg_download        -H "Authorization: Bearer 1SDrQH1FkH+pON0GsSjt2gYeMSP02uYqfuu7LWdaBvY=" -d ''</code></p>
<h2 id="custom-https-mqtts-sever">Custom HTTP(S) / MQTT(S) sever</h2>
<p>Ruuvi Gateway connects to the Ruuvi Cloud by default. However, you can configure it to use an HTTP(S) or MQTT server to route data from your nearby sensors to a custom location instead.</p>
<p>Ruuvi Gateway supports client authentication via SSL for HTTPS and MQTTS by enabling the upload of a client certificate and its associated private key.</p>
<p>Also, you can use a server SSL Certificate if you want to be independent of public Certificate Authorities (CAs) or if you have deployed a self-signed certificate on the HTTPS/MQTTS server.</p>
<figure>
<img src="images/cloud_options_advanced_settings.png" alt="" /><figcaption>cloud_options_advanced_settings</figcaption>
</figure>
<p>You can enable or disable sending data to Ruuvi Cloud:</p>
<figure>
<img src="images/custom_server_ruuvi_cloud.png" alt="" /><figcaption>custom_server_ruuvi_cloud</figcaption>
</figure>
<p>Or configure to send data to your own server via HTTP/HTTPS (you can configure sending to both Ruuvi Cloud and your own server):</p>
<figure>
<img src="images/custom_server_http.png" alt="" /><figcaption>custom_server_http</figcaption>
</figure>
<p>You can choose the data format for sending to your own server: * Raw data without decoding (default) * Raw data and decoded data * Decoded data only</p>
<p><strong>Note</strong>: Decoding is supported only for Ruuvi sensors.</p>
<p>It is possible to set initial sending interval for HTTP(S) server (in seconds). But this value can be overridden by the server by sending “X-Ruuvi-Gateway-Rate” in the HTTP response header.</p>
<p>Also, you can enable relaying data to MQTT server:</p>
<figure>
<img src="images/custom_server_mqtt.png" alt="" /><figcaption>custom_server_mqtt</figcaption>
</figure>
<p>You can choose the data format for sending to your own server: * Raw data without decoding (default) * Raw data and decoded data * Decoded data only</p>
<p><strong>Note</strong>: Decoding is supported only for Ruuvi sensors.</p>
<p>In case the data flow from the sensors is too large, you can set the period with which the data will be sent over MQTT by defining sending interval.</p>
<p>In the Statistics section, you can configure the sending of statistics to Ruuvi Cloud or your own server, or disable the sending of statistics:</p>
<figure>
<img src="images/custom_server_statistics.png" alt="" /><figcaption>custom_server_statistics</figcaption>
</figure>
<h2 id="time-synchronization-options">Time Synchronization Options</h2>
<p>If the default set of NTP servers is not accessible, then you can specify the addresses of other NTP servers or use DHCP to obtain a list of NTP servers automatically. If the Ruuvi Gateway does not have access to the Internet and NTP, you can disable time synchronisation, but in this case, relayed messages will not contain timestamps.</p>
<p>To configure NTP servers you need to enable advanced settings in the <strong>Cloud Options</strong>:</p>
<figure>
<img src="images/cloud_options_advanced_settings.png" alt="" /><figcaption>cloud_options_advanced_settings</figcaption>
</figure>
<p>After that, you will be able to choose how to synchronise the time:</p>
<figure>
<img src="images/time_sync_default.png" alt="" /><figcaption>time_sync_default</figcaption>
</figure>
<figure>
<img src="images/time_sync_custom.png" alt="" /><figcaption>time_sync_custom</figcaption>
</figure>
<h2 id="bluetooth-scanning-settings">Bluetooth Scanning Settings</h2>
<p>To get access to these settings you need to enable advanced settings in the <strong>Cloud Options</strong>:</p>
<figure>
<img src="images/cloud_options_advanced_settings.png" alt="" /><figcaption>cloud_options_advanced_settings</figcaption>
</figure>
<p>By default, Ruuvi Gateway scans only for Ruuvi sensors (filtered by BLE SIG member ID 0x0499)</p>
<figure>
<img src="images/bluetooth_scanning_default.png" alt="" /><figcaption>bluetooth_scanning_default</figcaption>
</figure>
<p>Also, you can enable Bluetooth long range (also known as Coded PHY). It is a new mode introduced in Bluetooth Version 5.0 to extend the range of Bluetooth devices from 30-100 feet to ranges of 1 kilometer and beyond.</p>
<p><strong>Note</strong>: Most existing devices only transmit on 1 Mbps PHY. 1 Mbps and Coded PHYs modulations are scanned sequentially, so scanning both PHYs will result in at least 50% packet loss on one of the PHYs.</p>
<figure>
<img src="images/bluetooth_scanning_ruuvi_and_long_range.png" alt="" /><figcaption>bluetooth_scanning_ruuvi_and_long_range</figcaption>
</figure>
<p>If you want to relay data from more than just Ruuvi sensors, you need to select the “<strong>All (including third party beacons)</strong>” option and adjust the scanned PHYs, Bluetooth channels used and the ability to use extended payload (BLE extended advertising):</p>
<figure>
<img src="images/bluetooth_scanning_all.png" alt="" /><figcaption>bluetooth_scanning_all</figcaption>
</figure>
<p><strong>Use channel</strong>. Each enabled BLE channel is scanned sequentially for a minimum of 7000 ms per channel, for a total of 21000 ms if all 3 channels are enabled. At least one channel must be active.</p>
<p>It is possible to filter out the relayed Bluetooth sensors. You can use whitelist mode if you only want to share data for specific sensors, or blacklist mode if you want to share data from all sensors except the specified list.</p>
<figure>
<img src="images/bluetooth_filtering.png" alt="" /><figcaption>bluetooth_filtering</figcaption>
</figure>
<p>If you don’t see some sensors, try to press on <strong>Refresh list</strong>. If a sensor is offline, you can add it manually by entering its MAC address and pressing on the <strong>Add</strong> button.</p>
